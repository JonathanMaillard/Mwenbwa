{"version":3,"sources":["../../src/server/index.js"],"names":["MongoClient","require","uri","client","useNewUrlParser","useUnifiedTopology","connect","err","console","log","collection","db","close","APP_PORT","process","env","app","use","express","static","path","resolve","__dirname","get","req","res","method","toUpperCase","url","send","listen","resultArray","cursor","find","forEach","doc","error","push"],"mappings":";;AAwBA;;AACA;;;;AAjBA,MAAMA,WAAW,GAAGC,OAAO,CAAC,SAAD,CAAP,CAAmBD,WAAvC;;AACA,MAAME,GAAG,GACL,kGADJ;AAGA,MAAMC,MAAM,GAAG,IAAIH,WAAJ,CAAgBE,GAAhB,EAAqB;AAACE,EAAAA,eAAe,EAAE,IAAlB;AAAwBC,EAAAA,kBAAkB,EAAE;AAA5C,CAArB,CAAf;AAGAF,MAAM,CAACG,OAAP,CAAeC,GAAG,IAAI;AAClBC,EAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,QAAMG,UAAU,GAAGP,MAAM,CAACQ,EAAP,CAAU,SAAV,CAAnB;AAIAR,EAAAA,MAAM,CAACS,KAAP;AACH,CAPD;AAYA,MAAM;AAACC,EAAAA;AAAD,IAAaC,OAAO,CAACC,GAA3B;AAEA,MAAMC,GAAG,GAAG,uBAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQC,iBAAQC,MAAR,CAAeC,cAAKC,OAAL,CAAaC,SAAb,EAAwB,kBAAxB,CAAf,CAAR;AAEAN,GAAG,CAACO,GAAJ,CAAQ,QAAR,EAAkB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC5BjB,EAAAA,OAAO,CAACC,GAAR,CAAa,QAAOe,GAAG,CAACE,MAAJ,CAAWC,WAAX,EAAyB,KAAIH,GAAG,CAACI,GAAI,EAAzD;AACAH,EAAAA,GAAG,CAACI,IAAJ,CAAS,eAAT;AACH,CAHD;AAKAb,GAAG,CAACc,MAAJ,CAAWjB,QAAX,EAAqB,MACjBL,OAAO,CAACC,GAAR,CAAa,kCAAiCI,QAAS,GAAvD,CADJ;AAQAG,GAAG,CAACO,GAAJ,CAAQ,YAAR,EAAsB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAChCjB,EAAAA,OAAO,CAACC,GAAR,CAAa,QAAOe,GAAG,CAACE,MAAJ,CAAWC,WAAX,EAAyB,KAAIH,GAAG,CAACI,GAAI,EAAzD;AACA,MAAIG,WAAW,GAAG,EAAlB;AAEA5B,EAAAA,MAAM,CAACG,OAAP,CAAeC,GAAG,IAAI;AAClBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AAEA,UAAMG,UAAU,GAAGP,MAAM,CAACQ,EAAP,CAAU,SAAV,CAAnB;AAEA,QAAIqB,MAAM,GAAGtB,UAAU,CAACA,UAAX,CAAsB,OAAtB,EAA+BuB,IAA/B,EAAb;AACAzB,IAAAA,OAAO,CAACC,GAAR,CAAYuB,MAAZ;AACAA,IAAAA,MAAM,CAACE,OAAP,CAAe,UAASC,GAAT,EAAc5B,GAAd,EAAkB;AAC7BC,MAAAA,OAAO,CAAC4B,KAAR,CAAc,aAAa7B,GAA3B;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAW0B,GAAvB;AACAJ,MAAAA,WAAW,CAACM,IAAZ,CAAiBF,GAAjB;AAEH,KALD,EAKG,YAAU;AACTV,MAAAA,GAAG,CAACI,IAAJ,CAASE,WAAT;AACA5B,MAAAA,MAAM,CAACS,KAAP;AAEH,KATD;AAYH,GAnBD;AAuBH,CA3BD","sourcesContent":["/* becodeorg/mwenbwa\n *\n * /src/server/index.js - Server entry point\n *\n * coded by leny@BeCode\n * started at 18/05/2020\n */\n\nconst MongoClient = require(\"mongodb\").MongoClient;\nconst uri =\n    \"mongodb+srv://dev:shrek55@smaragdencluster.jzsi8.mongodb.net/mwenbwa?retryWrites=true&w=majority\";\n// let collection;\nconst client = new MongoClient(uri, {useNewUrlParser: true, useUnifiedTopology: true});\n\n\nclient.connect(err => {\n    console.log(err);\n    const collection = client.db(\"mwenbwa\");\n    // perform actions on the collection object\n    // console.log(collection.collection(\"mwenbwa\").find());\n    // const test = collection.collection(\"mwenbwa\").insertOne({test: \"test\"});\n    client.close();\n});\n\nimport express from \"express\";\nimport path from \"path\";\n\nconst {APP_PORT} = process.env;\n\nconst app = express();\n\napp.use(express.static(path.resolve(__dirname, \"../../bin/client\")));\n\napp.get(\"/hello\", (req, res) => {\n    console.log(`ℹ️  (${req.method.toUpperCase()}) ${req.url}`);\n    res.send(\"Hello, World!\");\n});\n\napp.listen(APP_PORT, () =>\n    console.log(`🚀 Server is listening on port ${APP_PORT}.`),\n);\n\n\n\n\n//GET trees infos\napp.get(\"/get-trees\", (req, res) => {\n    console.log(`ℹ️  (${req.method.toUpperCase()}) ${req.url}`);\n    let resultArray = [];\n\n    client.connect(err => {\n        console.log(err);\n        \n        const collection = client.db(\"mwenbwa\");\n        // perform actions on the collection object\n        let cursor = collection.collection(\"trees\").find();\n        console.log(cursor);\n        cursor.forEach(function(doc, err){\n            console.error(\"error : \" + err);\n            console.log(\"doc : \" + doc);\n            resultArray.push(doc);\n\n        }, function(){\n            res.send(resultArray);\n            client.close();\n            \n        })\n        // const test = collection.collection(\"mwenbwa\").insertOne({test: \"test\"});\n        //client.close();\n    });\n    \n\n    //res.send(\"yo\");\n});\n\n"],"file":"index.js"}